<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Honours Project: controllers/uav_controller/src/main.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Honours Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_87b6ed4386158a4d6cd0ecd5fb5bd5c2.html">controllers</a></li><li class="navelem"><a class="el" href="../../dir_d9b4a7760cd2d10a53113f5207474e31.html">uav_controller</a></li><li class="navelem"><a class="el" href="../../dir_1394c7df9a2da4aa9d5e079b2f01705f.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">main.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Main file of the controller.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d9/d4c/uav_8h_source.html">includes/uav.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/d01/fds_8h_source.html">modules/includes/fds.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/db7/map_8h_source.html">util/includes/map.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d8/d3c/util_8h_source.html">util/includes/util.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d65/vec_8h_source.html">util/includes/vec.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a0a19204b959fe20f3fc034a2590309e3"><td class="memItemLeft" align="right" valign="top"><a id="a0a19204b959fe20f3fc034a2590309e3" name="a0a19204b959fe20f3fc034a2590309e3"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>GOAL_X</b>&#160;&#160;&#160;20.0f</td></tr>
<tr class="separator:a0a19204b959fe20f3fc034a2590309e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a343b67e7c8e5d34396bacc80133c0cf0"><td class="memItemLeft" align="right" valign="top"><a id="a343b67e7c8e5d34396bacc80133c0cf0" name="a343b67e7c8e5d34396bacc80133c0cf0"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>GOAL_Y</b>&#160;&#160;&#160;0.0f</td></tr>
<tr class="separator:a343b67e7c8e5d34396bacc80133c0cf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67847dbbccd5a6eede5eb814d8cc4e48"><td class="memItemLeft" align="right" valign="top"><a id="a67847dbbccd5a6eede5eb814d8cc4e48" name="a67847dbbccd5a6eede5eb814d8cc4e48"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>TARGT_ALT</b>&#160;&#160;&#160;2.0f</td></tr>
<tr class="separator:a67847dbbccd5a6eede5eb814d8cc4e48"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aea5b81dcbca6a72061713814e14ed59c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/main_8c.html#aea5b81dcbca6a72061713814e14ed59c">set_id</a> (<a class="el" href="../../d9/d4c/uav_8h.html#ad5913810cc5e4e9a6de5a7e53b7df545">Uav</a> *<a class="el" href="../../d4/d72/structuav.html">uav</a>, <a class="el" href="../../dd/d4d/unionVec3d.html">Vec3d</a> start)</td></tr>
<tr class="separator:aea5b81dcbca6a72061713814e14ed59c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f928aba570fe88f04eba2db59b62459"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/main_8c.html#a9f928aba570fe88f04eba2db59b62459">set_start_and_goal</a> (<a class="el" href="../../d9/d4c/uav_8h.html#ad5913810cc5e4e9a6de5a7e53b7df545">Uav</a> *<a class="el" href="../../d4/d72/structuav.html">uav</a>)</td></tr>
<tr class="separator:a9f928aba570fe88f04eba2db59b62459"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05848de25ac2dbec233935058a1d24b4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/main_8c.html#a05848de25ac2dbec233935058a1d24b4">init</a> ()</td></tr>
<tr class="separator:a05848de25ac2dbec233935058a1d24b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13a43e6d814de94978c515cb084873b1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/main_8c.html#a13a43e6d814de94978c515cb084873b1">run</a> ()</td></tr>
<tr class="separator:a13a43e6d814de94978c515cb084873b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ab0e9e9dca182b4c36bbc0d0718ecb8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/main_8c.html#a6ab0e9e9dca182b4c36bbc0d0718ecb8">follower_wait</a> ()</td></tr>
<tr class="separator:a6ab0e9e9dca182b4c36bbc0d0718ecb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79d916211b3eca38a97c2ed92986a944"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/main_8c.html#a79d916211b3eca38a97c2ed92986a944">follower_run</a> ()</td></tr>
<tr class="separator:a79d916211b3eca38a97c2ed92986a944"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92a88abf0da2b17a5321e42b74bdb2bd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/main_8c.html#a92a88abf0da2b17a5321e42b74bdb2bd">main_loop</a> (int timestep)</td></tr>
<tr class="separator:a92a88abf0da2b17a5321e42b74bdb2bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada7f892aa09adca3647631590ca1beb0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/main_8c.html#ada7f892aa09adca3647631590ca1beb0">clean_up</a> ()</td></tr>
<tr class="separator:ada7f892aa09adca3647631590ca1beb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ddf1224851353fc92bfbff6f499fa97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d29/main_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr class="separator:a0ddf1224851353fc92bfbff6f499fa97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a3220f4b82d7be7ab65f9bb05bc0ebd1a"><td class="memItemLeft" align="right" valign="top"><a id="a3220f4b82d7be7ab65f9bb05bc0ebd1a" name="a3220f4b82d7be7ab65f9bb05bc0ebd1a"></a>
<a class="el" href="../../d9/d4c/uav_8h.html#ad5913810cc5e4e9a6de5a7e53b7df545">Uav</a>&#160;</td><td class="memItemRight" valign="bottom"><b>uav</b></td></tr>
<tr class="separator:a3220f4b82d7be7ab65f9bb05bc0ebd1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Main file of the controller. </p>
<p>This file contains the initialization, main loop and clean up functions. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ada7f892aa09adca3647631590ca1beb0" name="ada7f892aa09adca3647631590ca1beb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada7f892aa09adca3647631590ca1beb0">&#9670;&#160;</a></span>clean_up()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void clean_up </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The clean up function </p>

</div>
</div>
<a id="a79d916211b3eca38a97c2ed92986a944" name="a79d916211b3eca38a97c2ed92986a944"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79d916211b3eca38a97c2ed92986a944">&#9670;&#160;</a></span>follower_run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void follower_run </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The main function of the followers. It handles the received waypoints and coordinates the movements. </p>

</div>
</div>
<a id="a6ab0e9e9dca182b4c36bbc0d0718ecb8" name="a6ab0e9e9dca182b4c36bbc0d0718ecb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ab0e9e9dca182b4c36bbc0d0718ecb8">&#9670;&#160;</a></span>follower_wait()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void follower_wait </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This functions makes the followers wait until a message is received </p>

</div>
</div>
<a id="a05848de25ac2dbec233935058a1d24b4" name="a05848de25ac2dbec233935058a1d24b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05848de25ac2dbec233935058a1d24b4">&#9670;&#160;</a></span>init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function initializes the program. First it initializes the webots controller, then it initializes debug logging, and the UAV itself. It also call a function to set the start goal. </p>

</div>
</div>
<a id="a0ddf1224851353fc92bfbff6f499fa97" name="a0ddf1224851353fc92bfbff6f499fa97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ddf1224851353fc92bfbff6f499fa97">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The main function </p>

</div>
</div>
<a id="a92a88abf0da2b17a5321e42b74bdb2bd" name="a92a88abf0da2b17a5321e42b74bdb2bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92a88abf0da2b17a5321e42b74bdb2bd">&#9670;&#160;</a></span>main_loop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void main_loop </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timestep</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The main loop function proper. Depending on the values of the state of the UAV different functions are called. </p>

</div>
</div>
<a id="a13a43e6d814de94978c515cb084873b1" name="a13a43e6d814de94978c515cb084873b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13a43e6d814de94978c515cb084873b1">&#9670;&#160;</a></span>run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void run </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is the backbone of the program. It is the main function of the leader UAV and it is responisble for planning the path of the leader and followers, and coordinate the movements. </p>

</div>
</div>
<a id="aea5b81dcbca6a72061713814e14ed59c" name="aea5b81dcbca6a72061713814e14ed59c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea5b81dcbca6a72061713814e14ed59c">&#9670;&#160;</a></span>set_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_id </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d4c/uav_8h.html#ad5913810cc5e4e9a6de5a7e53b7df545">Uav</a> *&#160;</td>
          <td class="paramname"><em>uav</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d4d/unionVec3d.html">Vec3d</a>&#160;</td>
          <td class="paramname"><em>start</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function randomly generates an id give the initial staring position of the UAV. It uses the position as seeds. </p>

</div>
</div>
<a id="a9f928aba570fe88f04eba2db59b62459" name="a9f928aba570fe88f04eba2db59b62459"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f928aba570fe88f04eba2db59b62459">&#9670;&#160;</a></span>set_start_and_goal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_start_and_goal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d4c/uav_8h.html#ad5913810cc5e4e9a6de5a7e53b7df545">Uav</a> *&#160;</td>
          <td class="paramname"><em>uav</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This funtion gets the GPS position of the UAV and creates two vector, goal and start, based on predefined value and the GPS position. The initial position is rounded to the nearest integer. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7
</small></address>
</body>
</html>
